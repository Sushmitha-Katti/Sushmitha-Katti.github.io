


<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Sortable - Display as grid</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="/resources/demos/style.css"> -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <style>
    .container {
        text-align: center;
        
    }
    .chart{
        border: 1px solid black;
        margin: 10px;
    }
    
    .slide{
        
        /* height: 100px; */
        border: 1px solid #dadada;
        margin:16px;
        text-align: center;
        padding: 25px;
        background: linear-gradient(to bottom, #9999ff 0%, #ff99cc 100%);
        
    }
    .btn-save{
        width:100px;
        margin:auto;
    }
    #save{
        padding:0.5rem 1rem;
    }
  </style>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"/>
  <script>
  $( function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
  } );

  </script>
</head>
<body>
<div class = "container"  >
    <div class = "row">
        <div class = "col-md-6" id = "main-column">
                <div class = "row d-block charts"  id = "sortable"></div>
                
               
        </div>
        
        
</div>
<div class = "row btn-save">
    <button id = "save" class = "btn btn-primary" onclick="savefn()">Save</button>
</div>
<div class = "row" id = "displayids">

</div>
</div>

<script>
//---------------------------Function to Save--------------------------------------------------------------------------- 
   function savefn() {
    var ids1 = $('.charts .chart').map(function(){
    return {id: this.id, class : this.class.split(" ")[0]+this.class.split(" ")[1],value: this.textContent,}
    

    
}).get()
let textlist = ""

ids1.map(id => textlist=textlist+"  ,  "+id.id)

document.getElementById('displaytext').innerHTML = textlist

}

//---------------------------------------Whole Elements organisation---------------------------------------
order = [{id : "one", value:1,class : "col-md-3 float-left",height: "130"}, {id :"two" ,value :2,class : "col-md-3 float-left",height: "130"}, {id :"three",value :3,class : "col-md-3 float-left",height: "130"}, {id:"four",value:4,class : "col-md-3 float-left",height: "130"}, {id:"five",value :5,class : "col-md-3 float-left",height: "130"},{id:"six",value:6,class : "col-md-3 float-left",height: "130"}, {id: "seven",value:7,class : "col-md-3 float-left",height: "130"}, {id:"eight",value:8,class : "col-md-3 float-left",height: "130"}, {id:"nine",value:9,class : "col-md-3 float-left",height: "130"}, {id: "ten",value:10,class : "col-md-3 float-left",height: "130"}, {id:"eleven",value:11,class : "col-md-3 float-left",height: "130"}, {id:"twelve",value:12,class : "col-md-3 float-left",height: "130"}, {id:"thirteen",value:13,class : "col-md-3 float-left",height: "130"}, {id:"fourteen",value:14,class : "col-md-3 float-left",height: "130"}, {id:"fifteen",value:"15",class : "col-md-3 float-left",height: "130"}, {id:"sixteen",value:"16",class : "col-md-3 float-left",height: "130"}];
let main = document.getElementById('sortable')

// let colDiv = document.createElement("div")
// colDiv.className = "col-md-3 float-left chart"


order.map(o => {

    let colDiv = document.createElement("div")
    colDiv.className = o.class+" chart"
    colDiv.id = o.id
    // val.appendChild(colDive);
    let slidediv = document.createElement("div")
    slidediv.className = "slide"
    slidediv.id = "slide-"+o.id
    colDiv.style.height = o.height+"px"
    // colDiv.style.width = o.width+"px"
    slidediv.style.height = (o.height-30)+"px"
    // slidediv.style.width = (o.width-30)+"px"
    let text = document.createTextNode(o.value)
    let htag = document.createElement('h1')
    htag.appendChild(text)
    slidediv.appendChild(htag)
    colDiv.appendChild(slidediv)
    main.appendChild(colDiv)
    
    


})

//------------------------------------------Ids Extraction----------------------------------------------------

 var ids = $('.charts .chart').map(function(){
    return this.id
}).get()

//--------------------------------------Display IDS--------------------------------------------------------

    let displayEle = document.getElementById('displayids')
    let divElement = document.createElement('h2');
    divElement.id = "displaytext"
    let idlist = ""
    ids.map(id => idlist=idlist+"  ,  "+id)
    let text = document.createTextNode(idlist);
    divElement.appendChild(text)
    displayEle.appendChild(divElement)



//-------------------------------- Resizable  Function---------------------------------------
$(document).ready(function(){
    $( ".chart" ).resizable({
        start:function(event,ui){
        
        },
        
        resize:function(event,ui){
            var a = ui.originalElement.outerWidth()-ui.originalElement.width()
            var b = ui.size.width+a
            var unit = $("#main-column").width()
            var divv = parseInt((b/unit)*12,);
            var newvalue = "col-md-"+divv;
            var old = ui.originalElement.context.className
            ui.element.context.className = old.replace(old.split(" ")[0],newvalue)
            // console.log(newvalue)
            


        },
        stop:function(event,ui){
            var oldheight = parseInt($("#slide-"+ui.element.context.id).css("height").replace("px", ""))
            var hofparent = parseInt(ui.originalSize.height)
            var newhofparent = parseInt(ui.size.height)
            var absolute = Math.ceil(newhofparent/130)
            
            var finalnewheight = absolute*130 +(absolute-1)*10*2
            console.log("adsfdf",hofparent,newhofparent,absolute,finalnewheight)
            var newheight = finalnewheight - 30
            // console.log(newheight,oldheight,hofparent,newhofparent )
             $("#slide-"+ui.element.context.id).css("height", newheight+"px")
             $("#"+ui.element.context.id).css("height", finalnewheight+"px")

        }
    });

});

// --------------------------------------Reset the changes on Double Click On the Element-----------------------------------------------------
$(".chart").dblclick(function(event) { 
                if(event.target.className.split(" ").indexOf("chart")>=0){
                id = event.target.id
               
                o = order.filter(o => o.id == id )
               
                $("#"+id).css("height",o[0].height+"px")
                // $("#"+id).css("width",o[0].width+"px")
                var oldclass = event.target.className
                // console.log(oldclass)
                event.target.className = oldclass.replace(oldclass.split(" ")[0],o[0].class.split(" ")[0])
                $("#slide-"+id).css("height",(o[0].height-30)+"px")
               
                }
                
            }); 

 
</script>

    
    
 
</body>
</html>